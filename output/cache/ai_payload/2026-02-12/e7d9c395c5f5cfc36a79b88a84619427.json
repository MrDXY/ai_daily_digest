{
  "url": "https://matklad.github.io/2026/02/11/programming-aphorisms.html",
  "payload": {
    "title": "Programming Aphorisms",
    "content": "Programming Aphorisms\nFeb 11, 2026\nA meta programming post ‚Äî looking at my thought process when coding\nand trying to pin down what is programming ‚Äúknowledge‚Äù. Turns out, a\nsignificant fraction of that is just reducing new problems to a\nvocabulary of known tricks. This is a personal, descriptive post, not\na prescriptive post for you.\nIt starts with a question posted on Ziggit. The background here is\nthat Zig is in the process of removing ambient IO capabilities.\nCurrently, you can access program environment from anywhere via\nstd.process.getEnvVarOwned\n.\nIn the next Zig version, you‚Äôll have to thread\nstd.process.Environ.Map\nfrom main down to every routine that needs access to the environment.\nIn this user‚Äôs case, they have a\nreadHistory\nfunction\nwhich used to look up the path to the history file in the environment,\nand they are wondering how to best model that in the new Zig. The\noptions on the table are:\npub\nfn\nreadHistory\n(\nio: std.Io,\nalloc: Allocator,\nfile: std.Io.File,\n) ReadHistoryError\n!\nvoid\n;\npub\nfn\nreadHistory\n(\nio: std.Io,\nalloc: Allocator,\nmaybe_environ_map: ?\n*\nstd.process.Environ.Map,\n) ReadHistoryError\n!\nvoid\n;\npub\nfn\nreadHistory\n(\nio: std.Io,\nalloc: Allocator,\nmaybe_absolute_path: ?[]\nconst\nu8\n,\nmaybe_environ_map: ?\n*\nstd.process.Environ.Map,\n) ReadHistoryError\n!\nvoid\n;\nMy starting point would instead be this:\npub\nconst\nHistoryOptions =\nstruct\n{\nfile: []\nconst\nu8\n,\npub\nfn\nfrom_environment\n(\nenvironment:\n*\nconst\nstd.process.Environ.Map,\n) HistoryOptions;\n};\npub\nfn\nreadHistory\n(\nio: std.Io,\ngpa: Allocator,\noptions: HistoryOptions,\n) ReadHistoryError\n!\nvoid\n;\nIn terms of meta programming, what I find fascinating is that this,\nfor me, is both immediate (I don‚Äôt have to think about it), but also\nis clearly decomposable into multiple factoids I‚Äôve accumulated\nbefore. Here‚Äôs a deconstruction of what I did here, the verbal\n‚Äúlabels‚Äù I use to think about what I did, and where I had learned to\ndo that:\nFirst\n, I ‚Äúraised the abstraction level‚Äù by giving\nit\na name and a type (\nHistoryOptions\n). This is a rare\ntransformation which I learned and named myself. Naming is important\nfor my thinking and communicating process. ‚ÄúLet‚Äôs raise abstraction\nlevel‚Äù is a staple code review comment of mine.\nSecond\n, I avoided ‚Äúmidlayer mistake‚Äù by making sure that\nevery aspect of options is user-configurable. Easy to do in Zig, where\nall fields are public. I learned about\nmidlayer mistake\nfrom a\nGitHub comment by\nJosh Triplett\n.\nThird\n, I provided a ‚Äúshortcut‚Äù, the\nfrom_environment\nconvenience function that cuts across abstraction layers. I learned\nthe ‚Äúshortcut‚Äù aphorism from\nDjango Views ‚Äî The Right Way\n.\nGermane to the present article, I read that post a decade after I had\ntouched Django the last time. It was useless to me on the object\nlevel. On the meta level, reading the article solidified and\nnamed\nseveral programming tricks for me. See reverberations\nin\nHow to Make a üí°?\n.\nFourth\n, I instinctively renamed\nalloc\nto ‚Äúgpa‚Äù\n(in opposition to ‚Äúarena‚Äù), the naming I spotted in the Zig compiler.\nFifth\n, I named the configuration parameter ‚Äúoptions‚Äù, not\nconfig\n,\nprops\nor\nparams\n, a\nnaming scheme I learned at TigerBeetle.\nSixth\n, I made sure that the signature follows ‚Äúpositional DI‚Äù\nscheme. Arguments that are dependencies, resources with unique types\nare injected positionally (and have canonical names like\nio\nor\ngpa\n). Arguments that\ndirectly\nvary the behavior of function (as opposed to affecting transitive\ncallees) are passed by name, in the\nOptions\nstruct.\nTo be specific, I don‚Äôt claim that my snippet is the right way to do\nthis! I have no idea, as I don‚Äôt have access to the full context.\nRather, if I were\nactually\nsolving the problem, the snippet\nabove would be my initial starting point for further iteration.\nNote that I also don‚Äôt explain\nwhy\nI am doing the above six\nthings, I only name them and point at the origin. Actually explaining\nthe\nwhy\nwould take a blog post of its own for every one of\nthem.\nAnd this is I think the key property of my thought process ‚Äî I have a\nbag of tricks, where the tricks are named. Inside my mind, this label\npoints both to the actual trick (code to type), as well as a\njustification for it (in what context that would be a good trick to\nuse).\nAnd I use these tricks all the time, literally! Just answering in\npassing to a forum comment makes me grab a handful! A lot of my\nknowledge is structured like a book of coding aphorisms.\nMeta meta ‚Äî how come I have acquired all those tricks? I read\nvoraciously, random commits, issues, jumping enthusiastically into\nrabbit holes and going on wiki trips. The key skill here is\nrecognizing an aphorism once you see it. Reading Ziggit is part of\ntrick-acquisition routine for me. Having learned the trick, I remember\nit, where ‚Äúremembering‚Äù is an act of active recall at the opportune\nmoment. This recall powers ‚Äúhorizontal gene transfer‚Äù across domains,\nstealing shortcuts from Django and midlayer mistake from the kernel.\nDid you notice that applying ‚Äúhorizontal gene transfer‚Äù to the domain\nof software engineering tacit knowledge is horizontal gene transfer?\nWhen entering a new domain, I actively seek out the missing tricks. I\nam relatively recent in Zig, but all the above tricks are either Zig\nnative, or at least Zig adapted. Every once in a while, I ‚Äúinvent‚Äù a\ntrick of my own. For example, ‚Äúpositional DI‚Äù is something I only\nverbalized last year. This doesn‚Äôt mean I hadn‚Äôt been doing that\nbefore, just that the activity wasn‚Äôt mentally labeled as a separate\nthing you can deliberately do. I had the idea, now I also have an\naphorism.",
    "description": "",
    "id": null,
    "short_id": null,
    "url": "https://matklad.github.io/2026/02/11/programming-aphorisms.html",
    "score": "22",
    "tags": "zig",
    "domain": "matklad.github.io",
    "author": "fanf",
    "author_url": "fanf",
    "time": "9 hours ago",
    "comments_text": "3 comments",
    "comments_url": "3 comments",
    "description_hint": null
  },
  "cached_at": "2026-02-12T05:05:35.667447"
}